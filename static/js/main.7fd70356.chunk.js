(this.webpackJsonplinewalks=this.webpackJsonplinewalks||[]).push([[0],{403:function(e,t,a){},579:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a(17),c=a.n(r),i=(a(403),a(85)),s=a.n(i),l=a(143),u=a(189),j=a(16),b=a(87),o=a(254),d=a.n(o),f=a(611),O=a(612),h=a(613),p=a(614),x=a(615),v=a(616),g=a(617),m=a(618),w=a(619),y=a(620),R=a(621),k=a(622),D=a(623),N=a(624),C=a(625),P=a(9),S={Add:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(f.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Check:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(O.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Clear:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(h.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Delete:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(p.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),DetailPanel:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(x.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Edit:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(v.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Export:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(g.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Filter:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(m.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),FirstPage:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(w.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),LastPage:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(y.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),NextPage:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(x.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),PreviousPage:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(R.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ResetSearch:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(h.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),Search:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(k.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),SortArrow:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(D.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(N.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))})),ViewColumn:Object(n.forwardRef)((function(e,t){return Object(P.jsx)(C.a,Object(j.a)(Object(j.a)({},e),{},{ref:t}))}))},I=function(e){var t=e.patients,a=e.onUpdatePatients,n=Object.values(t.dataById);return Object(P.jsx)("div",{className:"table-container",children:Object(P.jsx)(d.a,{title:!1,icons:S,columns:t.header,data:n,detailPanel:function(e){return Object(P.jsxs)("div",{className:"detail text-sub-title",children:[Object(P.jsx)("div",{children:"\uc804\uccb4 \ubc29\ubb38 \uc218 : ".concat(e.brief.visitCount)}),Object(P.jsx)("br",{}),Object(P.jsx)("div",{children:"\uc9c4\ub2e8 \uc815\ubcf4"}),e.brief.conditionList.map((function(e){return Object(P.jsx)("div",{children:"* ".concat(e)})}))]})},onRowClick:function(e,t,n){a(n,t)},options:{showTitle:!1,search:!1,pageSize:5,pageSizeOptions:[5,10,15],toolbar:!1,columnsButton:!1}})})},B=a(341),_=a(257),E=a(258),L=a(260),M=a(329),W=a(201),A=a(344),F=a(326),U=a(207),z=a.n(U),J=a(213);function T(){return(T=Object(l.a)(s.a.mark((function e(){var t,n,r,c,i,l,u;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a(207),n={patients:null,gender:null,race:null,ethnicity:null},e.next=4,t("http://49.50.167.136:9871/api/patient/list");case 4:return r=e.sent,e.next=7,t("http://49.50.167.136:9871/api/gender/list");case 7:return c=e.sent,e.next=10,t("http://49.50.167.136:9871/api/race/list");case 10:return i=e.sent,e.next=13,t("http://49.50.167.136:9871/api/ethnicity/list");case 13:return l=e.sent,e.next=16,t("http://49.50.167.136:9871/api/patient/stats");case 16:return u=e.sent,n.patients=r.data.patient,n.gender=c.data.genderList,n.race=i.data.raceList,n.ethnicity=l.data.ethnicityList,n.stats=u.data.stats,e.abrupt("return",n);case 23:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var G={gender:null,age_min:null,age_max:null,race:null,ethnicity:null,isDeath:null},H={PaperProps:{style:{maxHeight:224,width:250}}},V=Array.from({length:150},(function(e,t){return t+1}));var q=function(){var e=Object(n.useState)(!1),t=Object(b.a)(e,2),a=t[0],r=t[1],c=Object(n.useState)({}),i=Object(b.a)(c,2),o=i[0],d=i[1],f=Object(n.useState)({gender:null,age_min:null,age_max:null,race:null,ethnicity:null,isDeath:[!0,!1]}),O=Object(b.a)(f,2),h=O[0],p=O[1],x=Object(n.useState)(G),v=Object(b.a)(x,2),g=v[0],m=v[1],w=Object(n.useState)([]),y=Object(b.a)(w,2),R=y[0],k=y[1],D=Object(n.useState)([]),N=Object(b.a)(D,2),C=N[0],S=N[1],U=Object(n.useState)(!1),q=Object(b.a)(U,2),K=q[0],Q=q[1];Object(n.useEffect)((function(){(function(){return T.apply(this,arguments)})().then((function(e){var t=X(e.patients);d(t),p(Object(j.a)(Object(j.a)({},h),{},{gender:e.gender,race:e.race,ethnicity:e.ethnicity})),k(e.stats),S(e.stats)})).then((function(){return r(!0)})).catch((function(e){console.log(e)}))}),[]),Object(n.useEffect)((function(){K&&(Z(),Q(!1))}),[K]);var X=function(e){var t=e.list.reduce((function(e,t){return e[t.personID]=t,e}),{}),a={header:[{title:"\ud658\uc790 ID",field:"personID"},{title:"\uc131\ubcc4",field:"gender",render:function(e){return"M"===e.gender?"\ub0a8\uc790":"\uc5ec\uc790"}},{title:"\uc0dd\ub144\uc6d4\uc77c",field:"birthDatetime",cellStyle:{width:"20%"}},{title:"\ub098\uc774",field:"age"},{title:"\uc778\uc885",field:"race"},{title:"\ubbfc\uc871",field:"ethnicity"},{title:"\uc0ac\ub9dd \uc5ec\ubd80",field:"isDeath",render:function(e){return e.isDeath?"\uc0ac\ub9dd":"\uc0dd\uc874"}}]};return a.data=e.list,a.dataById=t,a},Y=function(e,t){m(Object(j.a)(Object(j.a)({},g),{},Object(u.a)({},t,e.target.value)))},Z=function(){var e=Object(l.a)(s.a.mark((function e(){var t,a,n,r,c;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=new URL("http://49.50.167.136:9871/api/patient/list"),a=t.searchParams,n=R,Object.entries(g).filter((function(e){return null!==e[1]})).length>0?Object.entries(g).filter((function(e){return null!==e[1]})).map((function(e){if("isDeath"===e[0])a.append("death",e[1]);else{if(a.append(e[0],e[1]),"gender"===e[0]){var t=n.filter((function(t){return t[e[0]]===e[1]}));n=t}if("race"===e[0]){var r=n.filter((function(t){return t[e[0]]===e[1]}));n=r}if("ethnicity"===e[0]){var c=n.filter((function(t){return t[e[0]]===e[1]}));n=c}}})).forEach((function(e,t){0===t&&S(n)})):S(R),t.search=a.toString(),r=t.toString(),e.next=8,z.a.get(r);case 8:c=e.sent,c=X(c.data.patient),d(c);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=function(){var e=Object(l.a)(s.a.mark((function e(t,a){var n,r;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.a.get("http://49.50.167.136:9871/api/patient/brief/".concat(a.personID));case 2:n=(n=e.sent).data,(r=o.dataById)[a.personID]=Object(j.a)(Object(j.a)({},r[a.personID]),{},{brief:n}),d(Object(j.a)(Object(j.a)({},o),{},{dataById:r,data:Object.values(r)})),t();case 8:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),ee=function(e){if("gender"===e){var t={labels:[],data:[]},a=0,n=0;C.map((function(e){"M"===e.gender?a+=e.count:n+=e.count}));var r=a+n;return t.labels=["\ub0a8\uc790","\uc5ec\uc790"],t.data=[a/r*100,n/r*100],t}if("race"===e){var c,i={labels:[],data:[]},s=null===(c=h.race)||void 0===c?void 0:c.reduce((function(e,t){return e[t]=0,e}),{});if(C.map((function(e){s[e.race]+=e.count})),s){var l=Object.values(s).reduce((function(e,t){return e+t}),0);i.labels=Object.keys(s),i.data=Object.values(s).map((function(e){return e/l*100}))}return i}if("ethnicity"===e){var u,j={labels:[],data:[]},b=null===(u=h.ethnicity)||void 0===u?void 0:u.reduce((function(e,t){return e[t]=0,e}),{});if(C.map((function(e){b[e.ethnicity]+=e.count})),b){var o=Object.values(b).reduce((function(e,t){return e+t}),0);j.labels=Object.keys(b),j.data=Object.values(b).map((function(e){return e/o*100}))}return j}},te={legend:{display:!0,position:"right"},tooltips:{enabled:!0,mode:"single",callbacks:{label:function(e,t){return t.datasets[0].data[e.index].toFixed(1)+"%"}}},maintainAspectRatio:!1},ae=[{labels:ee("gender").labels,datasets:[{labels:ee("gender").labels,data:ee("gender").data,borderWidth:2,hoverBorderWidth:3,backgroundColor:["rgba(98, 181, 229, 1)","rgba(238, 102, 121, 1)","rgba(255, 198, 0, 1)"],fill:!0}]},{labels:ee("race").labels,datasets:[{labels:ee("race").labels,data:ee("race").data,borderWidth:2,hoverBorderWidth:3,backgroundColor:["rgba(98, 181, 229, 1)","rgba(238, 102, 121, 1)","rgba(255, 198, 0, 1)","rgba(111, 86, 214, 1)","rgba(90, 214, 86, 1)"],fill:!0}]},{labels:ee("ethnicity").labels,datasets:[{labels:ee("ethnicity").labels,data:ee("ethnicity").data,borderWidth:2,hoverBorderWidth:3,backgroundColor:["rgba(98, 181, 229, 1)","rgba(238, 102, 121, 1)","rgba(255, 198, 0, 1)"],fill:!0}]}];return Object(P.jsxs)("div",{className:"main",children:[a&&Object(P.jsxs)("div",{className:"container",children:[Object(P.jsx)("div",{className:"text-title mb-20",children:"\ud658\uc790 \uc815\ubcf4"}),Object(P.jsxs)("div",{className:"chart-container",children:[Object(P.jsx)("div",{children:Object(P.jsx)(J.Pie,{options:te,data:ae[0],height:150})}),Object(P.jsx)("div",{children:Object(P.jsx)(J.Pie,{options:te,data:ae[1],height:150})}),Object(P.jsx)("div",{children:Object(P.jsx)(J.Pie,{options:te,data:ae[2],height:150})})]}),Object(P.jsxs)(B.a,{className:"MuiFormGroup-options filter-form-container jc-fe",row:!0,children:[Object(P.jsxs)(_.a,{className:"filter-form ",variant:"standard",children:[Object(P.jsx)(E.a,{children:"\uc131\ubcc4"}),Object(P.jsx)(L.a,{value:g.gender||"",onChange:function(e){return Y(e,"gender")},children:h.gender.map((function(e){return Object(P.jsx)(M.a,{value:e,children:"M"===e?"\ub0a8\uc790":"\uc5ec\uc790"})}))})]}),Object(P.jsxs)(_.a,{className:"filter-form ",variant:"standard",children:[Object(P.jsx)(E.a,{children:"\ucd5c\uc18c \ub098\uc774"}),Object(P.jsx)(L.a,{value:g.age_min||"",onChange:function(e){return Y(e,"age_min")},input:Object(P.jsx)(W.a,{}),MenuProps:H,children:V.map((function(e){return Object(P.jsx)(M.a,{value:e,children:e},e)}))})]}),Object(P.jsxs)(_.a,{className:"filter-form ",variant:"standard",children:[Object(P.jsx)(E.a,{children:"\ucd5c\ub300 \ub098\uc774"}),Object(P.jsx)(L.a,{value:g.age_max||"",onChange:function(e){return Y(e,"age_max")},input:Object(P.jsx)(W.a,{}),MenuProps:H,children:V.map((function(e){return Object(P.jsx)(M.a,{value:e,children:e},e)}))})]}),Object(P.jsxs)(_.a,{className:"filter-form ",variant:"standard",children:[Object(P.jsx)(E.a,{children:"\uc778\uc885"}),Object(P.jsx)(L.a,{value:g.race||"",onChange:function(e){return Y(e,"race")},children:h.race.map((function(e){return Object(P.jsx)(M.a,{value:e,children:e})}))})]}),Object(P.jsxs)(_.a,{className:"filter-form ",variant:"standard",children:[Object(P.jsx)(E.a,{children:"\ubbfc\uc871"}),Object(P.jsx)(L.a,{value:g.ethnicity||"",onChange:function(e){return Y(e,"ethnicity")},children:h.ethnicity.map((function(e){return Object(P.jsx)(M.a,{value:e,children:e})}))})]}),Object(P.jsxs)(_.a,{className:"filter-form ",variant:"standard",children:[Object(P.jsx)(E.a,{children:"\uc0ac\ub9dd\uc5ec\ubd80"}),Object(P.jsx)(L.a,{value:null!==g.isDeath?g.isDeath:"",onChange:function(e){return Y(e,"isDeath")},children:h.isDeath.map((function(e){return Object(P.jsx)(M.a,{value:e,children:!0===e?"\uc0ac\ub9dd":"\uc0dd\uc874"})}))})]}),Object(P.jsx)(A.a,{className:"reset-btn mr-20",onClick:function(){m(G),Q(!0)},children:"\ucd08\uae30\ud654"}),Object(P.jsx)(A.a,{className:"filter-btn",onClick:Z,children:"\uc870\ud68c"})]}),Object(P.jsx)(I,{patients:o,onUpdatePatients:$})]}),!a&&Object(P.jsx)("div",{className:"main",children:Object(P.jsx)("div",{className:"loading",children:Object(P.jsx)(F.a,{})})})]})};c.a.render(Object(P.jsx)(q,{}),document.getElementById("root"))}},[[579,1,2]]]);
//# sourceMappingURL=main.7fd70356.chunk.js.map